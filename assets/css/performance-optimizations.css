/* Performance Optimizations - Anti-Flicker CSS */

/* Critical rendering optimizations */
* {
    box-sizing: border-box;
}

/* Prevent layout shifts */
html {
    contain: layout style;
    scroll-behavior: smooth;
}

/* Optimize repaints and reflows */
body {
    contain: layout;
    will-change: auto;
}

/* GPU acceleration for specific elements only */
.card,
.btn,
.theme-toggle {
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

/* Prevent unnecessary repaints */
.no-repaint {
    contain: layout style paint;
}

/* Optimize image loading */
img {
    contain: layout style;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* Prevent backdrop-filter flicker */
.glass-morphism {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    /* No backdrop-filter to prevent flicker */
}

/* Smooth theme transitions */
.theme-transition * {
    transition: background-color 0.3s ease, 
                color 0.3s ease, 
                border-color 0.3s ease !important;
}

/* Optimize masonry layout */
.grid {
    transition: height 0.2s ease-out;
}

.grid-item {
    transition: transform 0.2s ease-out;
}

/* Loading states */
.loading {
    opacity: 0.7;
    transition: opacity 0.2s ease-out;
}

.loaded {
    opacity: 1;
    transition: opacity 0.3s ease-out;
}

/* Prevent flicker on hover states */
.hover-stable:hover {
    transform: translateZ(0) !important;
}

/* Mobile performance optimizations */
@media (max-width: 768px) {
    /* Reduce animations on mobile */
    * {
        transition-duration: 0.1s !important;
    }
    
    /* Disable transform animations on mobile */
    .mobile-no-transform:hover {
        transform: none !important;
    }
    
    /* Optimize touch interactions */
    .touch-optimized {
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
    }
}

/* High refresh rate display optimizations */
@media (min-resolution: 120dpi) {
    * {
        transition-timing-function: ease-out;
    }
}

/* Prevent animation conflicts */
.animation-safe {
    animation-fill-mode: both;
    animation-play-state: running;
}

/* Critical font loading */
@font-face {
    font-display: swap;
}

/* Optimize scrolling */
.smooth-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
}