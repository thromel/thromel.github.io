{% assign primary_name = site.data.profile.primary_name %}
{% assign secondary_name = site.data.profile.secondary_name %}

<div class="row mt-4">
    <div class="col-md-4">
        <div class="card profile-card h-100" data-aos="flip-left" data-aos-delay="200">
            <div class="card-body">
                <div class="text-center">
                    <figure class="figure mb-2" data-aos="zoom-in" data-aos-delay="400">
                        {% if site.data.profile.portrait_caption %}
                        <img src="{{site.data.profile.portrait_url}}" class="figure-img img-fluid profile-img animate__animated animate__fadeIn" alt="Photo" title="{{site.data.profile.portrait_caption}}">
                        {% else %}
                        <img src="{{site.data.profile.portrait_url}}" class="figure-img img-fluid profile-img animate__animated animate__fadeIn" alt="Photo">
                        {% endif %}
                    </figure>
                </div>
                <div>
                    <div class="text-center" style="margin-bottom: 0.3rem;" data-aos="fade-up" data-aos-delay="600">
                        <div class="h5 mb-1 animate__animated animate__fadeInDown" style="animation-delay: 0.8s;">
                            {{ primary_name }}
                        </div>
                        {% if secondary_name %}
                        <div class="text-muted small animate__animated animate__fadeInUp" style="animation-delay: 0.9s;">{{ secondary_name }}</div>
                        {% endif %}
                        
                        {% if site.data.profile.current_company %}
                        <div class="d-flex align-items-center justify-content-center mt-2 animate__animated animate__bounceIn" style="animation-delay: 1.0s;">
                            {% if site.data.profile.current_company.logo %}
                            <div class="mr-2">
                                <img src="{{ site.data.profile.current_company.logo }}" alt="{{ site.data.profile.current_company.name }}" class="company-logo animate__animated animate__rotateIn" style="height: 25px; width: auto; animation-delay: 1.1s;">
                            </div>
                            {% endif %}
                            <div class="text-muted" style="font-size: 0.9rem;">
                                {% if site.data.profile.current_company.url %}
                                <a href="{{ site.data.profile.current_company.url }}" target="_blank" class="text-muted">{{ site.data.profile.current_company.name }}</a>
                                {% else %}
                                {{ site.data.profile.current_company.name }}
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="text-center mt-2" style="font-size: 0.9rem; margin-bottom: 0.7rem;" data-aos="fade-up" data-aos-delay="800">
                        <div class="text-muted animate__animated animate__fadeInLeft" style="animation-delay: 1.2s;"><i class="fas fa-map-marker-alt mr-1 animate__animated animate__bounce animate__infinite animate__slower"></i> {{ site.data.profile.location }}</div>
                        <div class="animate__animated animate__fadeInRight" style="animation-delay: 1.3s;"><i class="fas fa-envelope mr-1 animate__animated animate__pulse animate__infinite animate__slower"></i> {{ site.data.profile.email }}</div>
                        {% if site.data.profile.work_email %}
                        <div class="animate__animated animate__fadeInLeft" style="animation-delay: 1.4s;"><i class="fas fa-briefcase mr-1"></i> {{ site.data.profile.work_email }}</div>
                        {% endif %}
                        {% if site.data.profile.phone %}
                        <div class="animate__animated animate__fadeInRight" style="animation-delay: 1.5s;"><i class="fas fa-phone mr-1"></i> {{ site.data.profile.phone }}</div>
                        {% endif %}
                        
                        <!-- Direct appointment button link -->
                        <div class="mt-3" data-aos="zoom-in" data-aos-delay="1000">
                            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ305Mj86OClwYTQjOE86Xp1LXkt1uYhGxI2YeQi7A-am9kKAbc9CXfitygxTrkmS5ZfG8ee3KZv?gv=true" target="_blank" class="calendar-button animate__animated animate__heartBeat animate__infinite animate__slower">
                                <i class="far fa-calendar-alt mr-1"></i> Book an appointment
                            </a>
                        </div>
                    </div>
                    <hr class="my-2">
                    <div class="text-center" style="font-size: 1.8rem; margin-bottom: 0.5rem;" data-aos="fade-up" data-aos-delay="1200">
                        {% if site.data.profile.github %}
                        <a href="https://github.com/{{ site.data.profile.github }}" title="Github" class="icon-primary animate__animated animate__bounceIn" style="animation-delay: 1.6s;"><i class="fab fa-github"></i></a>
                        {% endif %}
                        {% if site.data.profile.linkedin %}
                        <a href="https://www.linkedin.com/in/{{ site.data.profile.linkedin }}" title="Linkedin" class="icon-primary animate__animated animate__bounceIn" style="animation-delay: 1.7s;"><i class="fab fa-linkedin"></i></a>
                        {% endif %}
                        {% if site.data.profile.twitter %}
                        <a href="https://twitter.com/{{ site.data.profile.twitter }}" title="Twitter" class="icon-primary animate__animated animate__bounceIn" style="animation-delay: 1.8s;"><i class="fab fa-twitter"></i></a>
                        {% endif %}
                        {% if site.data.profile.orcid %}
                        <a href="https://orcid.org/{{ site.data.profile.orcid }}" title="ORCID" class="icon-primary animate__animated animate__bounceIn" style="animation-delay: 1.9s;"><i class="ai ai-orcid"></i></a>
                        {% endif %}
                        {% if site.data.profile.gscholar %}
                        <a href="https://scholar.google.com/citations?user={{ site.data.profile.gscholar }}" title="Google Scholar" class="icon-primary animate__animated animate__bounceIn" style="animation-delay: 2.0s;"><i class="ai ai-google-scholar"></i></a>
                        {% endif %}
                        {% if site.data.profile.cv_link %}
                        <a href="{{ site.data.profile.cv_link }}" target="_blank" title="CV" class="icon-primary animate__animated animate__bounceIn" style="animation-delay: 2.1s;"><i class="ai ai-cv"></i></a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-8">
        <div class="card h-100" data-aos="flip-right" data-aos-delay="300">
            <div class="card-body">
                <h4 class="mb-2 animate__animated animate__fadeInDown" style="animation-delay: 0.5s;">About Me</h4>
                
                <div class="about-me-container">
                    {% for item in site.data.profile.summary %}
                    {% if item contains "Actively seeking PhD/MSc positions" %}
                    <div class="alert alert-danger animate__animated animate__pulse animate__infinite animate__slower" role="alert" data-aos="zoom-in" data-aos-delay="{{ forloop.index | times: 100 | plus: 600 }}">
                        <i class="fas fa-graduation-cap mr-2 animate__animated animate__bounce animate__infinite animate__slower"></i>
                        <strong>{{ item }}</strong>
                    </div>
                    {% else %}
                    <div class="about-me-item animate__animated animate__fadeInUp" style="animation-delay: {{ forloop.index | times: 0.2 | plus: 0.7 }}s;" data-aos="fade-right" data-aos-delay="{{ forloop.index | times: 150 | plus: 700 }}">
                        <span class="about-me-arrow animate__animated animate__bounceIn" style="animation-delay: {{ forloop.index | times: 0.2 | plus: 0.8 }}s;">â€¢</span>
                        <div class="about-me-text">{{ item }}</div>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Full width Bio section -->
<div class="row mt-4">
    <div class="col">
        <div class="card bio-section" data-aos="fade-up" data-aos-delay="400">
            <div class="card-body">
                <h3 class="mb-4 bio-heading animate__animated animate__fadeInLeft" style="animation-delay: 0.8s;">Bio</h3>
                <div class="bio-content animate__animated animate__fadeIn" style="animation-delay: 1.0s;">{{ site.data.profile.short_bio }}</div>
            </div>
        </div>
    </div>
</div>

{% if site.data.profile.wechat_qrcode %}
<div class="modal fade" id="modal-wechat" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content animate__animated animate__zoomIn">
            <div class="modal-body p-0">
                <img src="{{ site.data.profile.wechat_qrcode | relative_url }}" class="img-fluid animate__animated animate__fadeIn">
            </div>
            {% if site.data.profile.wechat_prompt %}
            <div class="modal-body p-1 animate__animated animate__fadeInUp" style="animation-delay: 0.3s;">
                {{ site.data.profile.wechat_prompt }}
            </div>
            {% endif %}
            <div class="modal-footer">
                <button type="button" class="btn btn-primary animate__animated animate__bounceIn" data-dismiss="modal" style="animation-delay: 0.5s;">Close</button>
            </div>
        </div>
    </div>
</div>
{% endif %}
